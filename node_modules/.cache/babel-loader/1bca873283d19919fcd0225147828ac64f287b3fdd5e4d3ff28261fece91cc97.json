{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sahilkushwaha\\\\Downloads\\\\customer\\\\customer-onboarding-ui\\\\src\\\\components\\\\CustomerOnboarding\\\\CustomerOnboarding.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./CustomerOnboarding.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CustomerOnboarding = () => {\n  _s();\n  const [showOnboarding, setShowOnboarding] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [formData, setFormData] = useState({\n    customer: {\n      fullName: \"\",\n      dob: \"\",\n      mobile: \"\",\n      email: \"\",\n      pep: false,\n      income_band: \"Not provided\",\n      occupation: \"\"\n    },\n    address: {\n      line1: \"\",\n      line2: \"\",\n      city: \"\",\n      state: \"\",\n      pin: \"\",\n      country: \"\"\n    },\n    ids: {\n      idType: \"\",\n      // e.g., Aadhaar, PAN\n      idNumber: \"\" // the number of the selected ID\n    },\n    product: {\n      desired_account: \"\",\n      expected_mab_range: \"\"\n    },\n    documents: [],\n    kycStatus: \"pending\",\n    riskAssessment: \"pending\"\n  });\n  const [processId, setProcessId] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [ocrProcessing, setOcrProcessing] = useState(false);\n  const [alerts, setAlerts] = useState([]);\n\n  // Step 1: Document Upload + Basic Info + Address, Step 2: Contact & Product Info (with Submit)\n  const steps = [{\n    id: 1,\n    title: \"Document & Basic Info\",\n    status: \"active\"\n  }, {\n    id: 2,\n    title: \"Contact & Product Info\",\n    status: \"pending\"\n  }];\n  useEffect(() => {\n    setProcessId(`PROC-${Date.now()}`);\n  }, []);\n\n  // Debug: Monitor formData.documents changes\n  useEffect(() => {\n    console.log(\"=== FORMDATA DOCUMENTS CHANGED ===\");\n    console.log(\"Documents count:\", formData.documents.length);\n    console.log(\"Documents:\", formData.documents);\n  }, [formData.documents]);\n  const addAlert = (message, type = \"info\") => {\n    const alert = {\n      id: Date.now(),\n      message,\n      type\n    };\n    setAlerts(prev => [...prev, alert]);\n    setTimeout(() => {\n      setAlerts(prev => prev.filter(a => a.id !== alert.id));\n    }, 5000);\n  };\n  const handleInputChange = (section, field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [section]: {\n        ...prev[section],\n        [field]: value\n      }\n    }));\n  };\n  const handleFileUpload = async files => {\n    console.log(\"=== FILE UPLOAD STARTED ===\");\n    console.log(\"Files received:\", files);\n    console.log(\"Current documents before upload:\", formData.documents);\n    const newFiles = Array.from(files).map(file => ({\n      id: Date.now() + Math.random(),\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      file: file\n    }));\n    console.log(\"New files created:\", newFiles);\n    setFormData(prev => {\n      const updatedFormData = {\n        ...prev,\n        documents: [...prev.documents, ...newFiles]\n      };\n      console.log(\"Updated formData with documents:\", updatedFormData.documents);\n      console.log(\"Updated documents count:\", updatedFormData.documents.length);\n\n      // Use setTimeout to check state after update\n      setTimeout(() => {\n        console.log(\"=== STATE CHECK AFTER UPLOAD ===\");\n        console.log(\"Documents in state after timeout:\", updatedFormData.documents);\n      }, 100);\n      return updatedFormData;\n    });\n    addAlert(`${newFiles.length} document(s) uploaded successfully`, \"success\");\n\n    // Wait a bit to ensure state is updated before OCR processing\n    await new Promise(resolve => setTimeout(resolve, 100));\n\n    // --- Backend Integration Starts Here ---\n    if (files && files.length > 0) {\n      setOcrProcessing(true);\n      addAlert(\"Processing document with OCR...\", \"info\");\n\n      // Use backend OCR extract endpoint, then parse on frontend\n      const formDataToSend = new FormData();\n      formDataToSend.append(\"file\", files[0]);\n      try {\n        console.log(\"Sending file to OCR endpoint:\", files[0].name);\n        const response = await fetch(\"/api/ocr/extract\", {\n          method: \"POST\",\n          body: formDataToSend\n        });\n        console.log(\"OCR Response status:\", response.status);\n        console.log(\"OCR Response headers:\", response.headers);\n        if (!response.ok) {\n          const errorText = await response.text();\n          console.error(\"OCR API Error:\", response.status, errorText);\n          throw new Error(`Extraction failed: ${response.status} - ${errorText}`);\n        }\n        const data = await response.json();\n        console.log(\"OCR Response data:\", data);\n        const ocrText = data.text;\n        // Debug: Log OCR text to help diagnose extraction/parsing issues\n        console.log(\"Extracted OCR text:\", ocrText);\n        console.log(\"OCR text length:\", ocrText ? ocrText.length : 0);\n\n        // --- Parse OCR text for ID fields ---\n        function parseIdFields(text) {\n          console.log(\"=== STARTING OCR TEXT PARSING ===\");\n          console.log(\"Raw OCR text:\", text);\n          console.log(\"Text length:\", text.length);\n\n          // Split text into lines for analysis\n          const lines = text.split(/\\n|\\r/).map(line => line.trim()).filter(line => line.length > 0);\n          console.log(\"Text lines:\", lines.map((line, i) => `${i}: \"${line}\"`));\n          let fullName = null,\n            dob = null,\n            idNumber = null,\n            address = null;\n\n          // === FULL NAME EXTRACTION ===\n          console.log(\"--- Searching for Full Name ---\");\n\n          // For Aadhaar cards, look for specific patterns\n          const aadhaarNameMatch = text.match(/([A-Z][a-z]+\\s+[A-Z][a-z]+)\\s*\\|\\s*\\|[^|]*DOB:/);\n          if (aadhaarNameMatch) {\n            fullName = aadhaarNameMatch[1].trim();\n            console.log(\"Name found via Aadhaar pattern:\", fullName);\n          }\n\n          // If not found, try other patterns\n          if (!fullName) {\n            const namePatterns = [/(?:Name|नाम)[^:]*:?\\s*([A-Z][A-Za-z .']+)/i, /^([A-Z][a-z]+\\s+[A-Z][a-z]+)(?:\\s*\\||\\s*$)/m,\n            // Name followed by | or end of line\n            /([A-Z][a-z]+\\s+[A-Z][a-z]+)(?=\\s*\\|.*DOB)/g // Name before DOB section\n            ];\n            for (let i = 0; i < namePatterns.length; i++) {\n              const match = text.match(namePatterns[i]);\n              if (match && match[1]) {\n                fullName = match[1].trim();\n                console.log(`Name found with pattern ${i + 1}:`, fullName);\n                break;\n              }\n            }\n          }\n\n          // Fallback: Look for lines that look like names (avoiding common false positives)\n          if (!fullName) {\n            for (let line of lines) {\n              // Skip lines with numbers, common words, or too short\n              if (!/\\d/.test(line) && !/(?:government|india|aadhaar|card|male|female|address|dob|authority|identification|enrolment|information|verify|authentication)/i.test(line) && line.length > 5 && line.length < 30 && /^[A-Z][a-z]+\\s+[A-Z][a-z]+$/.test(line.trim())) {\n                fullName = line.trim();\n                console.log(\"Name found by line analysis:\", fullName);\n                break;\n              }\n            }\n          }\n\n          // === DATE OF BIRTH EXTRACTION ===\n          console.log(\"--- Searching for Date of Birth ---\");\n          const dobPatterns = [/(?:DOB|Date of Birth|जन्म तिथि)[^:]*:?\\s*([0-9]{1,2}[-/][0-9]{1,2}[-/][0-9]{2,4})/i, /(?:DOB|Date of Birth|जन्म तिथि)[^:]*:?\\s*([0-9]{1,2}\\s[A-Za-z]{3,9}\\s[0-9]{4})/i, /([0-9]{1,2}[-/][0-9]{1,2}[-/][0-9]{4})/g, /([0-9]{1,2}\\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\\s[0-9]{4})/gi, /([0-9]{4}[-/][0-9]{1,2}[-/][0-9]{1,2})/g // YYYY-MM-DD format\n          ];\n          for (let i = 0; i < dobPatterns.length; i++) {\n            const match = text.match(dobPatterns[i]);\n            if (match && match[1]) {\n              dob = match[1].trim();\n              console.log(`DOB found with pattern ${i + 1}:`, dob);\n              break;\n            }\n          }\n\n          // === ID TYPE AND NUMBER EXTRACTION ===\n          console.log(\"--- Searching for ID Type and Numbers ---\");\n          let idType = \"\";\n\n          // Enhanced Aadhaar patterns\n          const aadhaarPatterns = [/\\b[2-9][0-9]{3}\\s[0-9]{4}\\s[0-9]{4}\\b/g,\n          // Standard format with spaces\n          /\\b[2-9][0-9]{11}\\b/g,\n          // Without spaces\n          /\\b[0-9]{4}\\s[0-9]{4}\\s[0-9]{4}\\b/g,\n          // Any 12-digit with spaces\n          /([0-9]{4})\\s*([0-9]{4})\\s*([0-9]{4})/g // Flexible spacing\n          ];\n          for (let i = 0; i < aadhaarPatterns.length; i++) {\n            const matches = text.match(aadhaarPatterns[i]);\n            if (matches) {\n              idNumber = matches[0].replace(/\\s+/g, \" \").trim(); // Normalize spacing\n              idType = \"aadhaar\"; // Match dropdown value\n              console.log(`Aadhaar found with pattern ${i + 1}:`, idNumber);\n              break;\n            }\n          }\n\n          // PAN pattern\n          if (!idNumber) {\n            const panMatch = text.match(/\\b[A-Z]{5}[0-9]{4}[A-Z]\\b/g);\n            if (panMatch) {\n              idNumber = panMatch[0];\n              idType = \"pan\"; // Match dropdown value\n              console.log(\"PAN found:\", idNumber);\n            }\n          }\n\n          // Passport pattern\n          if (!idNumber) {\n            const passportMatch = text.match(/\\b[A-Z][0-9]{7}\\b/g);\n            if (passportMatch) {\n              idNumber = passportMatch[0];\n              idType = \"passport\"; // Match dropdown value\n              console.log(\"Passport found:\", idNumber);\n            }\n          }\n\n          // Driving License pattern (varies by state, but common patterns)\n          if (!idNumber) {\n            const dlMatch = text.match(/\\b[A-Z]{2}[0-9]{2}\\s?[0-9]{11}\\b|\\b[A-Z]{2}-[0-9]{13}\\b/g);\n            if (dlMatch) {\n              idNumber = dlMatch[0];\n              idType = \"voter\"; // Using voter as closest match in dropdown\n              console.log(\"Driving License found:\", idNumber);\n            }\n          }\n\n          // Voter ID pattern\n          if (!idNumber) {\n            const voterMatch = text.match(/\\b[A-Z]{3}[0-9]{7}\\b/g);\n            if (voterMatch) {\n              idNumber = voterMatch[0];\n              idType = \"voter\"; // Match dropdown value\n              console.log(\"Voter ID found:\", idNumber);\n            }\n          }\n\n          // Additional check for Aadhaar based on text content\n          if (!idType && /aadhaar|आधार|government of india|unique identification|uid/i.test(text)) {\n            idType = \"aadhaar\"; // Match dropdown value\n            console.log(\"ID Type identified as Aadhaar based on content\");\n          }\n\n          // Additional check for PAN based on text content\n          if (!idType && /permanent account number|income tax|pan card|पैन/i.test(text)) {\n            idType = \"pan\"; // Match dropdown value\n            console.log(\"ID Type identified as PAN based on content\");\n          }\n\n          // Additional check for Passport based on text content\n          if (!idType && /passport|republic of india|भारत गणराज्य/i.test(text)) {\n            idType = \"passport\"; // Match dropdown value\n            console.log(\"ID Type identified as Passport based on content\");\n          }\n          console.log(\"Final ID Type:\", idType);\n\n          // === ADDRESS EXTRACTION ===\n          console.log(\"--- Searching for Address ---\");\n\n          // For Aadhaar cards, look for the complete address pattern\n          // Pattern 1: Look for the full S/O address block\n          const fullAddressMatch = text.match(/S\\/O\\s+Anoop\\s+Kumar\\s+Jha[^|]*?\\|\\s*\\|[^|]*?Address:\\s*([^|]+?)(?=\\s*\\d{4}\\s+\\d{4}\\s+\\d{4})/s);\n          if (fullAddressMatch) {\n            address = fullAddressMatch[1].trim().replace(/\\s+/g, \" \").replace(/\\n/g, \", \");\n            console.log(\"Address found via full Aadhaar pattern:\", address);\n          }\n\n          // Pattern 2: Look for address after S/O line\n          if (!address) {\n            const soAddressMatch = text.match(/S\\/O\\s+[^,\\n]+,\\s*([^|]+?)(?=\\s*\\d{4}\\s+\\d{4}\\s+\\d{4}|$)/s);\n            if (soAddressMatch) {\n              address = soAddressMatch[1].trim().replace(/\\s+/g, \" \").replace(/\\n/g, \", \");\n              // Clean unwanted words\n              address = address.replace(/\\b(Authentication|Verify|Signature)\\b/gi, \"\").trim();\n              address = address.replace(/\\s+/g, \" \").replace(/,\\s*,/g, \",\").replace(/^,|,$/g, \"\");\n              console.log(\"Address found via S/O pattern:\", address);\n            }\n          }\n\n          // Pattern 3: Look for the specific address structure in your Aadhaar\n          if (!address) {\n            const specificMatch = text.match(/22\\/1,\\s*VUAY\\s+NAGAR[^|]*?Uttar\\s+Pradesh\\s*-\\s*208005/s);\n            if (specificMatch) {\n              address = specificMatch[0].trim().replace(/\\s+/g, \" \").replace(/\\n/g, \", \");\n              console.log(\"Address found via specific pattern:\", address);\n            }\n          }\n\n          // Pattern 4: Extract address components and combine\n          if (!address) {\n            const addressComponents = [];\n\n            // Look for S/O line\n            const soMatch = text.match(/S\\/O\\s+[A-Za-z\\s]+/);\n            if (soMatch) addressComponents.push(soMatch[0]);\n\n            // Look for house number/street\n            const houseMatch = text.match(/22\\/1,?\\s*VUAY\\s+NAGAR/i);\n            if (houseMatch) addressComponents.push(houseMatch[0]);\n\n            // Look for area\n            const areaMatch = text.match(/Hns\\s+Nagar\\s+S\\.O/i);\n            if (areaMatch) addressComponents.push(areaMatch[0]);\n\n            // Look for city\n            const cityMatch = text.match(/Kanpur\\s+Nagar/i);\n            if (cityMatch) addressComponents.push(cityMatch[0]);\n\n            // Look for state and PIN\n            const stateMatch = text.match(/Uttar\\s+Pradesh\\s*-?\\s*208005/i);\n            if (stateMatch) addressComponents.push(stateMatch[0]);\n            if (addressComponents.length >= 3) {\n              address = addressComponents.join(\", \");\n              // Clean unwanted words\n              address = address.replace(/\\b(Authentication|Verify|Signature)\\b/gi, \"\").trim();\n              address = address.replace(/\\s+/g, \" \").replace(/,\\s*,/g, \",\").replace(/^,|,$/g, \"\");\n              console.log(\"Address found by component extraction:\", address);\n            }\n          }\n\n          // Pattern 5: Look for lines containing address keywords\n          if (!address) {\n            const addressLines = [];\n            for (let i = 0; i < lines.length; i++) {\n              const line = lines[i].trim();\n\n              // Check for S/O line\n              if (/S\\/O\\s+[A-Za-z\\s]+/.test(line)) {\n                addressLines.push(line);\n                continue;\n              }\n\n              // Check for address components\n              if (line.length > 5 && /(?:22\\/1|VUAY|NAGAR|Hns|Kanpur|Uttar|Pradesh|208005)/i.test(line) && !/(?:aadhaar|government|india|male|female|dob|date|signature|verify|authentication|enrolment)/i.test(line)) {\n                // Clean up the line by removing unwanted words\n                let cleanLine = line.replace(/\\b(Authentication|Verify|Signature)\\b/gi, \"\").trim();\n                // Remove extra spaces and commas\n                cleanLine = cleanLine.replace(/\\s+/g, \" \").replace(/,\\s*,/g, \",\").replace(/^,|,$/g, \"\");\n                if (cleanLine.length > 3) {\n                  addressLines.push(cleanLine);\n                }\n              }\n              if (addressLines.length >= 4) break; // Take first 4 address-like lines\n            }\n            if (addressLines.length > 0) {\n              address = addressLines.join(\", \");\n              console.log(\"Address found by line analysis:\", address);\n            }\n          }\n\n          // Convert DOB to YYYY-MM-DD format for HTML date input\n          let formattedDob = dob;\n          if (dob) {\n            try {\n              // Handle DD/MM/YYYY format\n              if (/^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/.test(dob)) {\n                const [day, month, year] = dob.split(\"/\");\n                formattedDob = `${year}-${month.padStart(2, \"0\")}-${day.padStart(2, \"0\")}`;\n              }\n              // Handle DD-MM-YYYY format\n              else if (/^\\d{1,2}-\\d{1,2}-\\d{4}$/.test(dob)) {\n                const [day, month, year] = dob.split(\"-\");\n                formattedDob = `${year}-${month.padStart(2, \"0\")}-${day.padStart(2, \"0\")}`;\n              }\n              // Handle DD Month YYYY format\n              else if (/^\\d{1,2}\\s+[A-Za-z]+\\s+\\d{4}$/.test(dob)) {\n                const date = new Date(dob);\n                if (!isNaN(date.getTime())) {\n                  formattedDob = date.toISOString().split(\"T\")[0];\n                }\n              }\n              console.log(\"DOB converted from\", dob, \"to\", formattedDob);\n            } catch (error) {\n              console.log(\"DOB conversion failed, using original:\", dob);\n              formattedDob = dob;\n            }\n          }\n          const result = {\n            fullName,\n            dob: formattedDob,\n            idNumber,\n            idType,\n            address\n          };\n          console.log(\"=== FINAL PARSING RESULTS ===\");\n          console.log(\"Full Name:\", fullName);\n          console.log(\"DOB (formatted):\", formattedDob);\n          console.log(\"ID Type:\", idType);\n          console.log(\"ID Number:\", idNumber);\n          console.log(\"Address:\", address);\n          return result;\n        }\n        const extracted = parseIdFields(ocrText);\n        console.log(\"Extracted data to apply:\", extracted);\n\n        // Use functional update to ensure we get the latest state\n        setFormData(prevFormData => {\n          console.log(\"Current form data before OCR update:\", prevFormData);\n          console.log(\"Documents before OCR update:\", prevFormData.documents);\n          console.log(\"Documents count before OCR update:\", prevFormData.documents.length);\n          const newFormData = {\n            ...prevFormData,\n            customer: {\n              ...prevFormData.customer,\n              fullName: extracted.fullName || prevFormData.customer.fullName,\n              dob: extracted.dob || prevFormData.customer.dob\n            },\n            ids: {\n              ...prevFormData.ids,\n              idType: extracted.idType || prevFormData.ids.idType,\n              idNumber: extracted.idNumber || prevFormData.ids.idNumber\n            },\n            address: {\n              ...prevFormData.address,\n              line1: extracted.address || prevFormData.address.line1\n            },\n            // IMPORTANT: Preserve the documents array from the latest state\n            documents: prevFormData.documents\n          };\n          console.log(\"New form data after OCR update:\", newFormData);\n          console.log(\"Documents in new form data after OCR:\", newFormData.documents);\n          console.log(\"Documents count in new form data after OCR:\", newFormData.documents.length);\n          return newFormData;\n        });\n        if (extracted.fullName || extracted.dob || extracted.idType || extracted.idNumber || extracted.address) {\n          addAlert(\"Details autofilled from document. Please verify and complete the form.\", \"success\");\n        } else {\n          addAlert(\"No recognizable data found in document. Please fill manually.\", \"warning\");\n        }\n      } catch (err) {\n        console.error(\"OCR extraction error:\", err);\n        addAlert(`Failed to extract details from document: ${err.message}. Please fill manually.`, \"error\");\n      } finally {\n        setOcrProcessing(false);\n      }\n    } else {\n      setOcrProcessing(false);\n    }\n    // --- Backend Integration Ends Here ---\n  };\n  const removeFile = fileId => {\n    setFormData(prev => ({\n      ...prev,\n      documents: prev.documents.filter(doc => doc.id !== fileId)\n    }));\n  };\n\n  // New: handleNextStep logic for new step order\n  const handleNextStep = async () => {\n    setLoading(true);\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    if (currentStep === 1) {\n      // Step 1: Document Upload + Basic Document Info + Address\n      console.log(\"=== STEP 1 VALIDATION ===\");\n      console.log(\"Current formData.documents:\", formData.documents);\n      console.log(\"Documents length:\", formData.documents.length);\n      if (formData.documents.length === 0) {\n        console.log(\"ERROR: No documents found in formData\");\n        addAlert(\"Please upload at least one document\", \"error\");\n        setLoading(false);\n        return;\n      }\n      // Validate document info fields (name, dob, address line 1, id info)\n      const {\n        customer,\n        ids,\n        address\n      } = formData;\n      if (!customer.fullName || !customer.dob || !address.line1 || !ids.idType || !ids.idNumber) {\n        addAlert(\"Please fill in all required fields marked with *\", \"error\");\n        setLoading(false);\n        return;\n      }\n      addAlert(\"Document information saved. Proceed to fill contact and additional details.\", \"success\");\n      setCurrentStep(prev => Math.min(prev + 1, steps.length));\n    }\n    setLoading(false);\n  };\n\n  // New: handleSubmitFromStep2 - handles submission directly from step 2\n  const handleSubmitFromStep2 = async () => {\n    setLoading(true);\n\n    // Step 2: Contact Info + Address Details + Product Info validation\n    const {\n      customer,\n      address,\n      product\n    } = formData;\n    if (!customer.mobile || !customer.email || !address.city || !address.state || !address.pin || !address.country || !product.desired_account || !product.expected_mab_range) {\n      addAlert(\"Please fill in all required fields marked with *\", \"error\");\n      setLoading(false);\n      return;\n    }\n\n    // If validation passes, submit the application\n    await handleSubmitApplication();\n  };\n  const handleSubmitApplication = async () => {\n    setLoading(true);\n    try {\n      // Prepare user info for BPMN process\n      const userInfo = {\n        customer: formData.customer,\n        address: formData.address,\n        ids: formData.ids,\n        product: formData.product,\n        submissionTimestamp: new Date().toISOString()\n      };\n      console.log(\"=== STARTING BPMN ONBOARDING PROCESS ===\");\n      console.log(\"User Info:\", userInfo);\n      console.log(\"Documents:\", formData.documents);\n\n      // Create FormData for multipart request\n      const formDataToSend = new FormData();\n      formDataToSend.append(\"userInfo\", JSON.stringify(userInfo));\n      console.log(\"UserInfo JSON being sent:\", JSON.stringify(userInfo, null, 2));\n\n      // Add the first document (assuming primary document for BPMN start)\n      if (formData.documents.length > 0) {\n        const primaryDoc = formData.documents[0];\n        console.log(\"Primary document for BPMN:\", primaryDoc.name, primaryDoc.size);\n\n        // Use the actual file object stored in the document\n        const file = primaryDoc.file;\n        formDataToSend.append(\"document\", file);\n        console.log(\"File prepared for upload:\", file.name, file.size, file.type);\n      } else {\n        addAlert(\"No documents found to submit\", \"error\");\n        setLoading(false);\n        return;\n      }\n\n      // Call BPMN start API\n      const bpmnResponse = await fetch(\"/onboarding/start\", {\n        method: \"POST\",\n        body: formDataToSend\n      });\n      if (!bpmnResponse.ok) {\n        throw new Error(`BPMN start failed: ${bpmnResponse.status}`);\n      }\n      const bpmnResult = await bpmnResponse.json();\n      console.log(\"BPMN Process Started:\", bpmnResult);\n\n      // Set process ID from BPMN response\n      setProcessId(bpmnResult.processInstanceKey);\n\n      // Simulate additional processing time\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Use BPMN success or simulate triage\n      const riskLevels = [\"low\", \"medium\", \"high\"];\n      const randomRisk = riskLevels[Math.floor(Math.random() * riskLevels.length)];\n      const triagePassed = randomRisk === \"low\"; // Only low risk passes automatically\n\n      const updatedFormData = {\n        ...formData,\n        workflowStatus: triagePassed ? \"account_setup\" : \"manual_review\",\n        submissionTimestamp: new Date().toISOString(),\n        riskLevel: randomRisk,\n        aiTriageResult: triagePassed ? \"passed\" : \"failed\",\n        workflowHistory: [{\n          step: \"Application Submitted\",\n          status: \"completed\",\n          timestamp: new Date().toISOString(),\n          description: \"Customer submitted onboarding application\"\n        }, {\n          step: \"Initial Triage\",\n          status: \"completed\",\n          timestamp: new Date().toISOString(),\n          description: `AI Agent completed initial triage - ${randomRisk} risk detected`\n        }, ...(triagePassed ? [{\n          step: \"Account Setup\",\n          status: \"in_progress\",\n          timestamp: new Date().toISOString(),\n          description: \"Account creation in progress\"\n        }] : [{\n          step: \"Manual Review\",\n          status: \"pending\",\n          timestamp: new Date().toISOString(),\n          description: \"Application requires manual review due to risk level\"\n        }])]\n      };\n\n      // Update form data\n      setFormData(updatedFormData);\n\n      // Save to localStorage for other components to access\n      const existingApplications = JSON.parse(localStorage.getItem(\"submittedApplications\") || \"[]\");\n      const newApplication = {\n        ...updatedFormData,\n        id: processId,\n        status: triagePassed ? \"account_setup\" : \"pending_review\"\n      };\n      existingApplications.push(newApplication);\n      localStorage.setItem(\"submittedApplications\", JSON.stringify(existingApplications));\n\n      // Trigger storage event for other components\n      window.dispatchEvent(new Event(\"storage\"));\n      if (triagePassed) {\n        addAlert(`BPMN Process Started! Process ID: ${bpmnResult.processInstanceKey}`, \"success\");\n      } else {\n        addAlert(`Application submitted successfully! Risk level: ${randomRisk.toUpperCase()}. Manual review required.`, \"info\");\n      }\n\n      // Set submission state to show success screen\n      setIsSubmitted(true);\n    } catch (error) {\n      console.error(\"BPMN onboarding start failed:\", error);\n      addAlert(`Failed to start onboarding process: ${error.message}`, \"error\");\n    }\n    setLoading(false);\n  };\n  const handlePreviousStep = () => {\n    setCurrentStep(prev => Math.max(prev - 1, 1));\n  };\n  const getRiskLevelColor = level => {\n    switch (level) {\n      case \"low\":\n        return \"#28a745\";\n      case \"medium\":\n        return \"#ffc107\";\n      case \"high\":\n        return \"#dc3545\";\n      default:\n        return \"#6c757d\";\n    }\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case \"pending_review\":\n        return \"#ffc107\";\n      case \"approved\":\n        return \"#28a745\";\n      case \"rejected\":\n        return \"#dc3545\";\n      case \"additional_docs_required\":\n        return \"#17a2b8\";\n      default:\n        return \"#6c757d\";\n    }\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n  };\n  const renderSuccessScreen = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"form-section-title\",\n        children: \"\\uD83C\\uDFAF Onboarding Initiated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 888,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"completion-status\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-success\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u2705 Onboarding Process Initiated!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 891,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Thank you for completing the onboarding process. The customer details and documents have been submitted to the BPMN workflow engine for processing.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 892,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 890,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"process-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\uD83D\\uDCCB Process Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 900,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Process Instance Key:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 903,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 902,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: processId || \"Pending...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 905,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 901,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Submitted On:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 909,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 908,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: new Date().toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 911,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 907,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 915,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 914,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDD04 In Progress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 917,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 913,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 899,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: \"30px\",\n            textAlign: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: () => {\n              setIsSubmitted(false);\n              setShowOnboarding(false);\n              setCurrentStep(1);\n              setFormData({\n                customer: {\n                  fullName: \"\",\n                  dob: \"\",\n                  mobile: \"\",\n                  email: \"\",\n                  pep: false,\n                  income_band: \"Not provided\",\n                  occupation: \"\"\n                },\n                address: {\n                  line1: \"\",\n                  line2: \"\",\n                  city: \"\",\n                  state: \"\",\n                  pin: \"\",\n                  country: \"\"\n                },\n                ids: {\n                  idType: \"\",\n                  idNumber: \"\"\n                },\n                product: {\n                  desired_account: \"\",\n                  expected_mab_range: \"\"\n                },\n                documents: [],\n                kycStatus: \"pending\",\n                riskAssessment: \"pending\"\n              });\n            },\n            children: \"Start New Application\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 922,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 921,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 889,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 887,\n      columnNumber: 7\n    }, this);\n  };\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 1:\n        // Step 1: Document Upload + Basic Info + Address\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"form-section-title\",\n            children: \"Document Upload & Basic Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 976,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"document-upload\",\n            onDrop: async e => {\n              e.preventDefault();\n              if (!ocrProcessing) {\n                await handleFileUpload(e.dataTransfer.files);\n              }\n            },\n            onDragOver: e => e.preventDefault(),\n            onClick: () => {\n              if (!ocrProcessing) {\n                document.getElementById(\"file-input\").click();\n              }\n            },\n            style: {\n              opacity: ocrProcessing ? 0.6 : 1,\n              cursor: ocrProcessing ? \"not-allowed\" : \"pointer\"\n            },\n            children: [ocrProcessing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"upload-spinner\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1001,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1000,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"upload-text\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Processing document with OCR...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1004,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Please wait while we extract information from your document\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1005,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1003,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"upload-icon\",\n                children: \"\\uD83D\\uDCC4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1013,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"upload-text\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Drag and drop your documents here, or click to browse\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1015,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Supported formats: PDF, JPG, PNG (Max 10MB each)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1016,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1014,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"file-input\",\n              type: \"file\",\n              multiple: true,\n              accept: \".pdf,.jpg,.jpeg,.png\",\n              style: {\n                display: \"none\"\n              },\n              onChange: async e => {\n                if (!ocrProcessing) {\n                  await handleFileUpload(e.target.files);\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1020,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 979,\n            columnNumber: 13\n          }, this), formData.documents.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Uploaded Documents:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1036,\n              columnNumber: 17\n            }, this), formData.documents.map(doc => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"file-name\",\n                  children: doc.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1040,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"file-size\",\n                  children: formatFileSize(doc.size)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1041,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1039,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"remove-file\",\n                onClick: () => removeFile(doc.id),\n                title: \"Remove file\",\n                children: \"\\u2715\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1045,\n                columnNumber: 21\n              }, this)]\n            }, doc.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1038,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1035,\n            columnNumber: 15\n          }, this), ocrProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ocr-processing\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"processing-indicator\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1061,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Extracting information from document...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1062,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1060,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1059,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Document Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1068,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Full Name *\",\n              value: formData.customer.fullName,\n              onChange: e => handleInputChange(\"customer\", \"fullName\", e.target.value),\n              disabled: ocrProcessing\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1070,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              placeholder: \"Date of Birth *\",\n              value: formData.customer.dob,\n              onChange: e => handleInputChange(\"customer\", \"dob\", e.target.value),\n              disabled: ocrProcessing\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1079,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1069,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid equal-cols\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              placeholder: \"Complete Address *\",\n              value: formData.address.line1,\n              onChange: e => handleInputChange(\"address\", \"line1\", e.target.value),\n              rows: \"3\",\n              disabled: ocrProcessing,\n              style: {\n                width: \"100%\",\n                resize: \"vertical\",\n                fontFamily: \"inherit\",\n                fontSize: \"inherit\",\n                padding: \"8px 12px\",\n                border: \"1px solid #ddd\",\n                borderRadius: \"4px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1090,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1089,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid equal-cols\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: formData.ids.idType,\n              onChange: e => handleInputChange(\"ids\", \"idType\", e.target.value),\n              required: true,\n              disabled: ocrProcessing,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select ID Type *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1118,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"aadhaar\",\n                children: \"Aadhaar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1119,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"pan\",\n                children: \"PAN Card\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1120,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"voter\",\n                children: \"Voter ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"passport\",\n                children: \"Passport\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1122,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1110,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: `Enter ${formData.ids.idType || \"ID\"} Number *`,\n              value: formData.ids.idNumber,\n              onChange: e => handleInputChange(\"ids\", \"idNumber\", e.target.value),\n              required: true,\n              disabled: ocrProcessing\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1124,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 975,\n          columnNumber: 11\n        }, this);\n      case 2:\n        // Step 2: Contact Info, Address Details, and Product Info\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"form-section-title\",\n            children: \"Contact & Product Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Contact Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"tel\",\n              placeholder: \"Mobile Number *\",\n              value: formData.customer.mobile,\n              onChange: e => handleInputChange(\"customer\", \"mobile\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1148,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Email Address *\",\n              value: formData.customer.email,\n              onChange: e => handleInputChange(\"customer\", \"email\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1156,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Personal Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"input-label\",\n                children: \"Occupation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1169,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.customer.occupation,\n                onChange: e => handleInputChange(\"customer\", \"occupation\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1170,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"input-label\",\n                children: \"Income Band\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1179,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: formData.customer.income_band,\n                onChange: e => handleInputChange(\"customer\", \"income_band\", e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Income Band\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1186,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"0-2L\",\n                  children: \"0-2L\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1187,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"2L-5L\",\n                  children: \"2L-5L\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1188,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"5L-10L\",\n                  children: \"5L-10L\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1189,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"10L+\",\n                  children: \"10L+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1190,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Not provided\",\n                  children: \"Not provided\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1191,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1180,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1178,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"checkbox-container\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: formData.customer.pep,\n                  onChange: e => handleInputChange(\"customer\", \"pep\", e.target.checked)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1198,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"checkbox-label\",\n                  children: \"I am a Politically Exposed Person (PEP)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1205,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1197,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1196,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Address Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"input-label\",\n                children: \"City *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1215,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.address.city,\n                onChange: e => handleInputChange(\"address\", \"city\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1216,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"input-label\",\n                children: \"State *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1225,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.address.state,\n                onChange: e => handleInputChange(\"address\", \"state\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1226,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1224,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"input-label\",\n                children: \"PIN Code *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1235,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.address.pin,\n                onChange: e => handleInputChange(\"address\", \"pin\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1236,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1234,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"input-label\",\n                children: \"Country *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1245,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.address.country,\n                onChange: e => handleInputChange(\"address\", \"country\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1246,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1244,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Product Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: formData.product.desired_account,\n              onChange: e => handleInputChange(\"product\", \"desired_account\", e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Account Type *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1268,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"savings\",\n                children: \"Savings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1269,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"current\",\n                children: \"Current\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1270,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1258,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: formData.product.expected_mab_range,\n              onChange: e => handleInputChange(\"product\", \"expected_mab_range\", e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Expected Monthly Balance *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1282,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"0-10k\",\n                children: \"0-10k\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1283,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"10k-25k\",\n                children: \"10k-25k\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1284,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"25k+\",\n                children: \"25k+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1285,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1272,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1141,\n          columnNumber: 11\n        }, this);\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: !showOnboarding ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"start-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Welcome to Customer Portal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1300,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: \"1rem\",\n          justifyContent: \"center\",\n          flexWrap: \"wrap\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => setShowOnboarding(true),\n          children: \"Start Onboarding\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1309,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1301,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1299,\n      columnNumber: 9\n    }, this) : isSubmitted ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"page-title\",\n        children: \"Customer Onboarding\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1319,\n        columnNumber: 11\n      }, this), renderSuccessScreen()]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"page-title\",\n        children: \"Customer Onboarding\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1324,\n        columnNumber: 11\n      }, this), alerts.map(alert => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `alert alert-${alert.type}`,\n        children: alert.message\n      }, alert.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1327,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"workflow-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-indicator\",\n          children: steps.map((step, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `step-circle ${index + 1 < currentStep ? \"completed\" : index + 1 === currentStep ? \"active\" : \"pending\"}`,\n              children: index + 1 < currentStep ? \"✓\" : step.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1337,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `step-label ${index + 1 < currentStep ? \"completed\" : index + 1 === currentStep ? \"active\" : \"\"}`,\n              children: step.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1348,\n              columnNumber: 19\n            }, this)]\n          }, step.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1336,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-fill\",\n            style: {\n              width: `${(currentStep - 1) / (steps.length - 1) * 100}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1364,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1363,\n          columnNumber: 13\n        }, this), renderStepContent(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-navigation\",\n          children: [currentStep > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: handlePreviousStep,\n            disabled: loading,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1376,\n            columnNumber: 17\n          }, this), currentStep === 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: handleNextStep,\n            disabled: loading,\n            children: loading ? \"Processing...\" : \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1385,\n            columnNumber: 17\n          }, this), currentStep === 2 && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success\",\n            onClick: handleSubmitFromStep2,\n            disabled: loading,\n            children: loading ? \"Submitting Application...\" : \"Submit Application\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1394,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1374,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1332,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1297,\n    columnNumber: 5\n  }, this);\n};\n_s(CustomerOnboarding, \"gZnvNsphN66NJ/ywsrr0u4wnrTw=\");\n_c = CustomerOnboarding;\nexport default CustomerOnboarding;\nvar _c;\n$RefreshReg$(_c, \"CustomerOnboarding\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","CustomerOnboarding","_s","showOnboarding","setShowOnboarding","currentStep","setCurrentStep","isSubmitted","setIsSubmitted","formData","setFormData","customer","fullName","dob","mobile","email","pep","income_band","occupation","address","line1","line2","city","state","pin","country","ids","idType","idNumber","product","desired_account","expected_mab_range","documents","kycStatus","riskAssessment","processId","setProcessId","loading","setLoading","ocrProcessing","setOcrProcessing","alerts","setAlerts","steps","id","title","status","Date","now","console","log","length","addAlert","message","type","alert","prev","setTimeout","filter","a","handleInputChange","section","field","value","handleFileUpload","files","newFiles","Array","from","map","file","Math","random","name","size","updatedFormData","Promise","resolve","formDataToSend","FormData","append","response","fetch","method","body","headers","ok","errorText","text","error","Error","data","json","ocrText","parseIdFields","lines","split","line","trim","i","aadhaarNameMatch","match","namePatterns","test","dobPatterns","aadhaarPatterns","matches","replace","panMatch","passportMatch","dlMatch","voterMatch","fullAddressMatch","soAddressMatch","specificMatch","addressComponents","soMatch","push","houseMatch","areaMatch","cityMatch","stateMatch","join","addressLines","cleanLine","formattedDob","day","month","year","padStart","date","isNaN","getTime","toISOString","result","extracted","prevFormData","newFormData","err","removeFile","fileId","doc","handleNextStep","min","handleSubmitFromStep2","handleSubmitApplication","userInfo","submissionTimestamp","JSON","stringify","primaryDoc","bpmnResponse","bpmnResult","processInstanceKey","riskLevels","randomRisk","floor","triagePassed","workflowStatus","riskLevel","aiTriageResult","workflowHistory","step","timestamp","description","existingApplications","parse","localStorage","getItem","newApplication","setItem","window","dispatchEvent","Event","toUpperCase","handlePreviousStep","max","getRiskLevelColor","level","getStatusColor","formatFileSize","bytes","k","sizes","parseFloat","pow","toFixed","renderSuccessScreen","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toLocaleDateString","style","marginTop","textAlign","onClick","renderStepContent","onDrop","e","preventDefault","dataTransfer","onDragOver","document","getElementById","click","opacity","cursor","multiple","accept","display","onChange","target","placeholder","disabled","rows","width","resize","fontFamily","fontSize","padding","border","borderRadius","required","checked","gap","justifyContent","flexWrap","index","_c","$RefreshReg$"],"sources":["C:/Users/sahilkushwaha/Downloads/customer/customer-onboarding-ui/src/components/CustomerOnboarding/CustomerOnboarding.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./CustomerOnboarding.css\";\r\n\r\nconst CustomerOnboarding = () => {\r\n  const [showOnboarding, setShowOnboarding] = useState(false);\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n\r\n  const [formData, setFormData] = useState({\r\n    customer: {\r\n      fullName: \"\",\r\n      dob: \"\",\r\n      mobile: \"\",\r\n      email: \"\",\r\n      pep: false,\r\n      income_band: \"Not provided\",\r\n      occupation: \"\",\r\n    },\r\n    address: {\r\n      line1: \"\",\r\n      line2: \"\",\r\n      city: \"\",\r\n      state: \"\",\r\n      pin: \"\",\r\n      country: \"\",\r\n    },\r\n    ids: {\r\n      idType: \"\", // e.g., Aadhaar, PAN\r\n      idNumber: \"\", // the number of the selected ID\r\n    },\r\n    product: {\r\n      desired_account: \"\",\r\n      expected_mab_range: \"\",\r\n    },\r\n    documents: [],\r\n    kycStatus: \"pending\",\r\n    riskAssessment: \"pending\",\r\n  });\r\n\r\n  const [processId, setProcessId] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [ocrProcessing, setOcrProcessing] = useState(false);\r\n  const [alerts, setAlerts] = useState([]);\r\n\r\n  // Step 1: Document Upload + Basic Info + Address, Step 2: Contact & Product Info (with Submit)\r\n  const steps = [\r\n    { id: 1, title: \"Document & Basic Info\", status: \"active\" },\r\n    { id: 2, title: \"Contact & Product Info\", status: \"pending\" },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    setProcessId(`PROC-${Date.now()}`);\r\n  }, []);\r\n\r\n\r\n\r\n  // Debug: Monitor formData.documents changes\r\n  useEffect(() => {\r\n    console.log(\"=== FORMDATA DOCUMENTS CHANGED ===\");\r\n    console.log(\"Documents count:\", formData.documents.length);\r\n    console.log(\"Documents:\", formData.documents);\r\n  }, [formData.documents]);\r\n\r\n  const addAlert = (message, type = \"info\") => {\r\n    const alert = { id: Date.now(), message, type };\r\n    setAlerts((prev) => [...prev, alert]);\r\n    setTimeout(() => {\r\n      setAlerts((prev) => prev.filter((a) => a.id !== alert.id));\r\n    }, 5000);\r\n  };\r\n\r\n  const handleInputChange = (section, field, value) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [section]: {\r\n        ...prev[section],\r\n        [field]: value,\r\n      },\r\n    }));\r\n  };\r\n\r\n  const handleFileUpload = async (files) => {\r\n    console.log(\"=== FILE UPLOAD STARTED ===\");\r\n    console.log(\"Files received:\", files);\r\n    console.log(\"Current documents before upload:\", formData.documents);\r\n\r\n    const newFiles = Array.from(files).map((file) => ({\r\n      id: Date.now() + Math.random(),\r\n      name: file.name,\r\n      size: file.size,\r\n      type: file.type,\r\n      file: file,\r\n    }));\r\n\r\n    console.log(\"New files created:\", newFiles);\r\n\r\n    setFormData((prev) => {\r\n      const updatedFormData = {\r\n        ...prev,\r\n        documents: [...prev.documents, ...newFiles],\r\n      };\r\n      console.log(\r\n        \"Updated formData with documents:\",\r\n        updatedFormData.documents\r\n      );\r\n      console.log(\"Updated documents count:\", updatedFormData.documents.length);\r\n\r\n      // Use setTimeout to check state after update\r\n      setTimeout(() => {\r\n        console.log(\"=== STATE CHECK AFTER UPLOAD ===\");\r\n        console.log(\r\n          \"Documents in state after timeout:\",\r\n          updatedFormData.documents\r\n        );\r\n      }, 100);\r\n\r\n      return updatedFormData;\r\n    });\r\n\r\n    addAlert(`${newFiles.length} document(s) uploaded successfully`, \"success\");\r\n\r\n    // Wait a bit to ensure state is updated before OCR processing\r\n    await new Promise((resolve) => setTimeout(resolve, 100));\r\n\r\n    // --- Backend Integration Starts Here ---\r\n    if (files && files.length > 0) {\r\n      setOcrProcessing(true);\r\n      addAlert(\"Processing document with OCR...\", \"info\");\r\n\r\n      // Use backend OCR extract endpoint, then parse on frontend\r\n      const formDataToSend = new FormData();\r\n      formDataToSend.append(\"file\", files[0]);\r\n\r\n      try {\r\n        console.log(\"Sending file to OCR endpoint:\", files[0].name);\r\n        const response = await fetch(\"/api/ocr/extract\", {\r\n          method: \"POST\",\r\n          body: formDataToSend,\r\n        });\r\n\r\n        console.log(\"OCR Response status:\", response.status);\r\n        console.log(\"OCR Response headers:\", response.headers);\r\n\r\n        if (!response.ok) {\r\n          const errorText = await response.text();\r\n          console.error(\"OCR API Error:\", response.status, errorText);\r\n          throw new Error(\r\n            `Extraction failed: ${response.status} - ${errorText}`\r\n          );\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(\"OCR Response data:\", data);\r\n\r\n        const ocrText = data.text;\r\n        // Debug: Log OCR text to help diagnose extraction/parsing issues\r\n        console.log(\"Extracted OCR text:\", ocrText);\r\n        console.log(\"OCR text length:\", ocrText ? ocrText.length : 0);\r\n\r\n        // --- Parse OCR text for ID fields ---\r\n        function parseIdFields(text) {\r\n          console.log(\"=== STARTING OCR TEXT PARSING ===\");\r\n          console.log(\"Raw OCR text:\", text);\r\n          console.log(\"Text length:\", text.length);\r\n\r\n          // Split text into lines for analysis\r\n          const lines = text\r\n            .split(/\\n|\\r/)\r\n            .map((line) => line.trim())\r\n            .filter((line) => line.length > 0);\r\n          console.log(\r\n            \"Text lines:\",\r\n            lines.map((line, i) => `${i}: \"${line}\"`)\r\n          );\r\n\r\n          let fullName = null,\r\n            dob = null,\r\n            idNumber = null,\r\n            address = null;\r\n\r\n          // === FULL NAME EXTRACTION ===\r\n          console.log(\"--- Searching for Full Name ---\");\r\n\r\n          // For Aadhaar cards, look for specific patterns\r\n          const aadhaarNameMatch = text.match(\r\n            /([A-Z][a-z]+\\s+[A-Z][a-z]+)\\s*\\|\\s*\\|[^|]*DOB:/\r\n          );\r\n          if (aadhaarNameMatch) {\r\n            fullName = aadhaarNameMatch[1].trim();\r\n            console.log(\"Name found via Aadhaar pattern:\", fullName);\r\n          }\r\n\r\n          // If not found, try other patterns\r\n          if (!fullName) {\r\n            const namePatterns = [\r\n              /(?:Name|नाम)[^:]*:?\\s*([A-Z][A-Za-z .']+)/i,\r\n              /^([A-Z][a-z]+\\s+[A-Z][a-z]+)(?:\\s*\\||\\s*$)/m, // Name followed by | or end of line\r\n              /([A-Z][a-z]+\\s+[A-Z][a-z]+)(?=\\s*\\|.*DOB)/g, // Name before DOB section\r\n            ];\r\n\r\n            for (let i = 0; i < namePatterns.length; i++) {\r\n              const match = text.match(namePatterns[i]);\r\n              if (match && match[1]) {\r\n                fullName = match[1].trim();\r\n                console.log(`Name found with pattern ${i + 1}:`, fullName);\r\n                break;\r\n              }\r\n            }\r\n          }\r\n\r\n          // Fallback: Look for lines that look like names (avoiding common false positives)\r\n          if (!fullName) {\r\n            for (let line of lines) {\r\n              // Skip lines with numbers, common words, or too short\r\n              if (\r\n                !/\\d/.test(line) &&\r\n                !/(?:government|india|aadhaar|card|male|female|address|dob|authority|identification|enrolment|information|verify|authentication)/i.test(\r\n                  line\r\n                ) &&\r\n                line.length > 5 &&\r\n                line.length < 30 &&\r\n                /^[A-Z][a-z]+\\s+[A-Z][a-z]+$/.test(line.trim())\r\n              ) {\r\n                fullName = line.trim();\r\n                console.log(\"Name found by line analysis:\", fullName);\r\n                break;\r\n              }\r\n            }\r\n          }\r\n\r\n          // === DATE OF BIRTH EXTRACTION ===\r\n          console.log(\"--- Searching for Date of Birth ---\");\r\n\r\n          const dobPatterns = [\r\n            /(?:DOB|Date of Birth|जन्म तिथि)[^:]*:?\\s*([0-9]{1,2}[-/][0-9]{1,2}[-/][0-9]{2,4})/i,\r\n            /(?:DOB|Date of Birth|जन्म तिथि)[^:]*:?\\s*([0-9]{1,2}\\s[A-Za-z]{3,9}\\s[0-9]{4})/i,\r\n            /([0-9]{1,2}[-/][0-9]{1,2}[-/][0-9]{4})/g,\r\n            /([0-9]{1,2}\\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\\s[0-9]{4})/gi,\r\n            /([0-9]{4}[-/][0-9]{1,2}[-/][0-9]{1,2})/g, // YYYY-MM-DD format\r\n          ];\r\n\r\n          for (let i = 0; i < dobPatterns.length; i++) {\r\n            const match = text.match(dobPatterns[i]);\r\n            if (match && match[1]) {\r\n              dob = match[1].trim();\r\n              console.log(`DOB found with pattern ${i + 1}:`, dob);\r\n              break;\r\n            }\r\n          }\r\n\r\n          // === ID TYPE AND NUMBER EXTRACTION ===\r\n          console.log(\"--- Searching for ID Type and Numbers ---\");\r\n\r\n          let idType = \"\";\r\n\r\n          // Enhanced Aadhaar patterns\r\n          const aadhaarPatterns = [\r\n            /\\b[2-9][0-9]{3}\\s[0-9]{4}\\s[0-9]{4}\\b/g, // Standard format with spaces\r\n            /\\b[2-9][0-9]{11}\\b/g, // Without spaces\r\n            /\\b[0-9]{4}\\s[0-9]{4}\\s[0-9]{4}\\b/g, // Any 12-digit with spaces\r\n            /([0-9]{4})\\s*([0-9]{4})\\s*([0-9]{4})/g, // Flexible spacing\r\n          ];\r\n\r\n          for (let i = 0; i < aadhaarPatterns.length; i++) {\r\n            const matches = text.match(aadhaarPatterns[i]);\r\n            if (matches) {\r\n              idNumber = matches[0].replace(/\\s+/g, \" \").trim(); // Normalize spacing\r\n              idType = \"aadhaar\"; // Match dropdown value\r\n              console.log(`Aadhaar found with pattern ${i + 1}:`, idNumber);\r\n              break;\r\n            }\r\n          }\r\n\r\n          // PAN pattern\r\n          if (!idNumber) {\r\n            const panMatch = text.match(/\\b[A-Z]{5}[0-9]{4}[A-Z]\\b/g);\r\n            if (panMatch) {\r\n              idNumber = panMatch[0];\r\n              idType = \"pan\"; // Match dropdown value\r\n              console.log(\"PAN found:\", idNumber);\r\n            }\r\n          }\r\n\r\n          // Passport pattern\r\n          if (!idNumber) {\r\n            const passportMatch = text.match(/\\b[A-Z][0-9]{7}\\b/g);\r\n            if (passportMatch) {\r\n              idNumber = passportMatch[0];\r\n              idType = \"passport\"; // Match dropdown value\r\n              console.log(\"Passport found:\", idNumber);\r\n            }\r\n          }\r\n\r\n          // Driving License pattern (varies by state, but common patterns)\r\n          if (!idNumber) {\r\n            const dlMatch = text.match(\r\n              /\\b[A-Z]{2}[0-9]{2}\\s?[0-9]{11}\\b|\\b[A-Z]{2}-[0-9]{13}\\b/g\r\n            );\r\n            if (dlMatch) {\r\n              idNumber = dlMatch[0];\r\n              idType = \"voter\"; // Using voter as closest match in dropdown\r\n              console.log(\"Driving License found:\", idNumber);\r\n            }\r\n          }\r\n\r\n          // Voter ID pattern\r\n          if (!idNumber) {\r\n            const voterMatch = text.match(/\\b[A-Z]{3}[0-9]{7}\\b/g);\r\n            if (voterMatch) {\r\n              idNumber = voterMatch[0];\r\n              idType = \"voter\"; // Match dropdown value\r\n              console.log(\"Voter ID found:\", idNumber);\r\n            }\r\n          }\r\n\r\n          // Additional check for Aadhaar based on text content\r\n          if (\r\n            !idType &&\r\n            /aadhaar|आधार|government of india|unique identification|uid/i.test(\r\n              text\r\n            )\r\n          ) {\r\n            idType = \"aadhaar\"; // Match dropdown value\r\n            console.log(\"ID Type identified as Aadhaar based on content\");\r\n          }\r\n\r\n          // Additional check for PAN based on text content\r\n          if (\r\n            !idType &&\r\n            /permanent account number|income tax|pan card|पैन/i.test(text)\r\n          ) {\r\n            idType = \"pan\"; // Match dropdown value\r\n            console.log(\"ID Type identified as PAN based on content\");\r\n          }\r\n\r\n          // Additional check for Passport based on text content\r\n          if (\r\n            !idType &&\r\n            /passport|republic of india|भारत गणराज्य/i.test(text)\r\n          ) {\r\n            idType = \"passport\"; // Match dropdown value\r\n            console.log(\"ID Type identified as Passport based on content\");\r\n          }\r\n\r\n          console.log(\"Final ID Type:\", idType);\r\n\r\n          // === ADDRESS EXTRACTION ===\r\n          console.log(\"--- Searching for Address ---\");\r\n\r\n          // For Aadhaar cards, look for the complete address pattern\r\n          // Pattern 1: Look for the full S/O address block\r\n          const fullAddressMatch = text.match(\r\n            /S\\/O\\s+Anoop\\s+Kumar\\s+Jha[^|]*?\\|\\s*\\|[^|]*?Address:\\s*([^|]+?)(?=\\s*\\d{4}\\s+\\d{4}\\s+\\d{4})/s\r\n          );\r\n          if (fullAddressMatch) {\r\n            address = fullAddressMatch[1]\r\n              .trim()\r\n              .replace(/\\s+/g, \" \")\r\n              .replace(/\\n/g, \", \");\r\n            console.log(\"Address found via full Aadhaar pattern:\", address);\r\n          }\r\n\r\n          // Pattern 2: Look for address after S/O line\r\n          if (!address) {\r\n            const soAddressMatch = text.match(\r\n              /S\\/O\\s+[^,\\n]+,\\s*([^|]+?)(?=\\s*\\d{4}\\s+\\d{4}\\s+\\d{4}|$)/s\r\n            );\r\n            if (soAddressMatch) {\r\n              address = soAddressMatch[1]\r\n                .trim()\r\n                .replace(/\\s+/g, \" \")\r\n                .replace(/\\n/g, \", \");\r\n              // Clean unwanted words\r\n              address = address\r\n                .replace(/\\b(Authentication|Verify|Signature)\\b/gi, \"\")\r\n                .trim();\r\n              address = address\r\n                .replace(/\\s+/g, \" \")\r\n                .replace(/,\\s*,/g, \",\")\r\n                .replace(/^,|,$/g, \"\");\r\n              console.log(\"Address found via S/O pattern:\", address);\r\n            }\r\n          }\r\n\r\n          // Pattern 3: Look for the specific address structure in your Aadhaar\r\n          if (!address) {\r\n            const specificMatch = text.match(\r\n              /22\\/1,\\s*VUAY\\s+NAGAR[^|]*?Uttar\\s+Pradesh\\s*-\\s*208005/s\r\n            );\r\n            if (specificMatch) {\r\n              address = specificMatch[0]\r\n                .trim()\r\n                .replace(/\\s+/g, \" \")\r\n                .replace(/\\n/g, \", \");\r\n              console.log(\"Address found via specific pattern:\", address);\r\n            }\r\n          }\r\n\r\n          // Pattern 4: Extract address components and combine\r\n          if (!address) {\r\n            const addressComponents = [];\r\n\r\n            // Look for S/O line\r\n            const soMatch = text.match(/S\\/O\\s+[A-Za-z\\s]+/);\r\n            if (soMatch) addressComponents.push(soMatch[0]);\r\n\r\n            // Look for house number/street\r\n            const houseMatch = text.match(/22\\/1,?\\s*VUAY\\s+NAGAR/i);\r\n            if (houseMatch) addressComponents.push(houseMatch[0]);\r\n\r\n            // Look for area\r\n            const areaMatch = text.match(/Hns\\s+Nagar\\s+S\\.O/i);\r\n            if (areaMatch) addressComponents.push(areaMatch[0]);\r\n\r\n            // Look for city\r\n            const cityMatch = text.match(/Kanpur\\s+Nagar/i);\r\n            if (cityMatch) addressComponents.push(cityMatch[0]);\r\n\r\n            // Look for state and PIN\r\n            const stateMatch = text.match(/Uttar\\s+Pradesh\\s*-?\\s*208005/i);\r\n            if (stateMatch) addressComponents.push(stateMatch[0]);\r\n\r\n            if (addressComponents.length >= 3) {\r\n              address = addressComponents.join(\", \");\r\n              // Clean unwanted words\r\n              address = address\r\n                .replace(/\\b(Authentication|Verify|Signature)\\b/gi, \"\")\r\n                .trim();\r\n              address = address\r\n                .replace(/\\s+/g, \" \")\r\n                .replace(/,\\s*,/g, \",\")\r\n                .replace(/^,|,$/g, \"\");\r\n              console.log(\"Address found by component extraction:\", address);\r\n            }\r\n          }\r\n\r\n          // Pattern 5: Look for lines containing address keywords\r\n          if (!address) {\r\n            const addressLines = [];\r\n            for (let i = 0; i < lines.length; i++) {\r\n              const line = lines[i].trim();\r\n\r\n              // Check for S/O line\r\n              if (/S\\/O\\s+[A-Za-z\\s]+/.test(line)) {\r\n                addressLines.push(line);\r\n                continue;\r\n              }\r\n\r\n              // Check for address components\r\n              if (\r\n                line.length > 5 &&\r\n                /(?:22\\/1|VUAY|NAGAR|Hns|Kanpur|Uttar|Pradesh|208005)/i.test(\r\n                  line\r\n                ) &&\r\n                !/(?:aadhaar|government|india|male|female|dob|date|signature|verify|authentication|enrolment)/i.test(\r\n                  line\r\n                )\r\n              ) {\r\n                // Clean up the line by removing unwanted words\r\n                let cleanLine = line\r\n                  .replace(/\\b(Authentication|Verify|Signature)\\b/gi, \"\")\r\n                  .trim();\r\n                // Remove extra spaces and commas\r\n                cleanLine = cleanLine\r\n                  .replace(/\\s+/g, \" \")\r\n                  .replace(/,\\s*,/g, \",\")\r\n                  .replace(/^,|,$/g, \"\");\r\n                if (cleanLine.length > 3) {\r\n                  addressLines.push(cleanLine);\r\n                }\r\n              }\r\n\r\n              if (addressLines.length >= 4) break; // Take first 4 address-like lines\r\n            }\r\n\r\n            if (addressLines.length > 0) {\r\n              address = addressLines.join(\", \");\r\n              console.log(\"Address found by line analysis:\", address);\r\n            }\r\n          }\r\n\r\n          // Convert DOB to YYYY-MM-DD format for HTML date input\r\n          let formattedDob = dob;\r\n          if (dob) {\r\n            try {\r\n              // Handle DD/MM/YYYY format\r\n              if (/^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/.test(dob)) {\r\n                const [day, month, year] = dob.split(\"/\");\r\n                formattedDob = `${year}-${month.padStart(\r\n                  2,\r\n                  \"0\"\r\n                )}-${day.padStart(2, \"0\")}`;\r\n              }\r\n              // Handle DD-MM-YYYY format\r\n              else if (/^\\d{1,2}-\\d{1,2}-\\d{4}$/.test(dob)) {\r\n                const [day, month, year] = dob.split(\"-\");\r\n                formattedDob = `${year}-${month.padStart(\r\n                  2,\r\n                  \"0\"\r\n                )}-${day.padStart(2, \"0\")}`;\r\n              }\r\n              // Handle DD Month YYYY format\r\n              else if (/^\\d{1,2}\\s+[A-Za-z]+\\s+\\d{4}$/.test(dob)) {\r\n                const date = new Date(dob);\r\n                if (!isNaN(date.getTime())) {\r\n                  formattedDob = date.toISOString().split(\"T\")[0];\r\n                }\r\n              }\r\n              console.log(\"DOB converted from\", dob, \"to\", formattedDob);\r\n            } catch (error) {\r\n              console.log(\"DOB conversion failed, using original:\", dob);\r\n              formattedDob = dob;\r\n            }\r\n          }\r\n\r\n          const result = {\r\n            fullName,\r\n            dob: formattedDob,\r\n            idNumber,\r\n            idType,\r\n            address,\r\n          };\r\n          console.log(\"=== FINAL PARSING RESULTS ===\");\r\n          console.log(\"Full Name:\", fullName);\r\n          console.log(\"DOB (formatted):\", formattedDob);\r\n          console.log(\"ID Type:\", idType);\r\n          console.log(\"ID Number:\", idNumber);\r\n          console.log(\"Address:\", address);\r\n\r\n          return result;\r\n        }\r\n\r\n        const extracted = parseIdFields(ocrText);\r\n\r\n        console.log(\"Extracted data to apply:\", extracted);\r\n\r\n        // Use functional update to ensure we get the latest state\r\n        setFormData((prevFormData) => {\r\n          console.log(\"Current form data before OCR update:\", prevFormData);\r\n          console.log(\"Documents before OCR update:\", prevFormData.documents);\r\n          console.log(\r\n            \"Documents count before OCR update:\",\r\n            prevFormData.documents.length\r\n          );\r\n\r\n          const newFormData = {\r\n            ...prevFormData,\r\n            customer: {\r\n              ...prevFormData.customer,\r\n              fullName: extracted.fullName || prevFormData.customer.fullName,\r\n              dob: extracted.dob || prevFormData.customer.dob,\r\n            },\r\n            ids: {\r\n              ...prevFormData.ids,\r\n              idType: extracted.idType || prevFormData.ids.idType,\r\n              idNumber: extracted.idNumber || prevFormData.ids.idNumber,\r\n            },\r\n            address: {\r\n              ...prevFormData.address,\r\n              line1: extracted.address || prevFormData.address.line1,\r\n            },\r\n            // IMPORTANT: Preserve the documents array from the latest state\r\n            documents: prevFormData.documents,\r\n          };\r\n\r\n          console.log(\"New form data after OCR update:\", newFormData);\r\n          console.log(\r\n            \"Documents in new form data after OCR:\",\r\n            newFormData.documents\r\n          );\r\n          console.log(\r\n            \"Documents count in new form data after OCR:\",\r\n            newFormData.documents.length\r\n          );\r\n\r\n          return newFormData;\r\n        });\r\n\r\n        if (\r\n          extracted.fullName ||\r\n          extracted.dob ||\r\n          extracted.idType ||\r\n          extracted.idNumber ||\r\n          extracted.address\r\n        ) {\r\n          addAlert(\r\n            \"Details autofilled from document. Please verify and complete the form.\",\r\n            \"success\"\r\n          );\r\n        } else {\r\n          addAlert(\r\n            \"No recognizable data found in document. Please fill manually.\",\r\n            \"warning\"\r\n          );\r\n        }\r\n      } catch (err) {\r\n        console.error(\"OCR extraction error:\", err);\r\n        addAlert(\r\n          `Failed to extract details from document: ${err.message}. Please fill manually.`,\r\n          \"error\"\r\n        );\r\n      } finally {\r\n        setOcrProcessing(false);\r\n      }\r\n    } else {\r\n      setOcrProcessing(false);\r\n    }\r\n    // --- Backend Integration Ends Here ---\r\n  };\r\n\r\n  const removeFile = (fileId) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      documents: prev.documents.filter((doc) => doc.id !== fileId),\r\n    }));\r\n  };\r\n\r\n  // New: handleNextStep logic for new step order\r\n  const handleNextStep = async () => {\r\n    setLoading(true);\r\n    await new Promise((resolve) => setTimeout(resolve, 1000));\r\n\r\n    if (currentStep === 1) {\r\n      // Step 1: Document Upload + Basic Document Info + Address\r\n      console.log(\"=== STEP 1 VALIDATION ===\");\r\n      console.log(\"Current formData.documents:\", formData.documents);\r\n      console.log(\"Documents length:\", formData.documents.length);\r\n\r\n      if (formData.documents.length === 0) {\r\n        console.log(\"ERROR: No documents found in formData\");\r\n        addAlert(\"Please upload at least one document\", \"error\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      // Validate document info fields (name, dob, address line 1, id info)\r\n      const { customer, ids, address } = formData;\r\n      if (\r\n        !customer.fullName ||\r\n        !customer.dob ||\r\n        !address.line1 ||\r\n        !ids.idType ||\r\n        !ids.idNumber\r\n      ) {\r\n        addAlert(\"Please fill in all required fields marked with *\", \"error\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      addAlert(\r\n        \"Document information saved. Proceed to fill contact and additional details.\",\r\n        \"success\"\r\n      );\r\n      setCurrentStep((prev) => Math.min(prev + 1, steps.length));\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  // New: handleSubmitFromStep2 - handles submission directly from step 2\r\n  const handleSubmitFromStep2 = async () => {\r\n    setLoading(true);\r\n\r\n    // Step 2: Contact Info + Address Details + Product Info validation\r\n    const { customer, address, product } = formData;\r\n    if (\r\n      !customer.mobile ||\r\n      !customer.email ||\r\n      !address.city ||\r\n      !address.state ||\r\n      !address.pin ||\r\n      !address.country ||\r\n      !product.desired_account ||\r\n      !product.expected_mab_range\r\n    ) {\r\n      addAlert(\"Please fill in all required fields marked with *\", \"error\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // If validation passes, submit the application\r\n    await handleSubmitApplication();\r\n  };\r\n\r\n  const handleSubmitApplication = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Prepare user info for BPMN process\r\n      const userInfo = {\r\n        customer: formData.customer,\r\n        address: formData.address,\r\n        ids: formData.ids,\r\n        product: formData.product,\r\n        submissionTimestamp: new Date().toISOString(),\r\n      };\r\n\r\n      console.log(\"=== STARTING BPMN ONBOARDING PROCESS ===\");\r\n      console.log(\"User Info:\", userInfo);\r\n      console.log(\"Documents:\", formData.documents);\r\n\r\n      // Create FormData for multipart request\r\n      const formDataToSend = new FormData();\r\n      formDataToSend.append(\"userInfo\", JSON.stringify(userInfo));\r\n\r\n      console.log(\r\n        \"UserInfo JSON being sent:\",\r\n        JSON.stringify(userInfo, null, 2)\r\n      );\r\n\r\n      // Add the first document (assuming primary document for BPMN start)\r\n      if (formData.documents.length > 0) {\r\n        const primaryDoc = formData.documents[0];\r\n        console.log(\r\n          \"Primary document for BPMN:\",\r\n          primaryDoc.name,\r\n          primaryDoc.size\r\n        );\r\n\r\n        // Use the actual file object stored in the document\r\n        const file = primaryDoc.file;\r\n        formDataToSend.append(\"document\", file);\r\n\r\n        console.log(\r\n          \"File prepared for upload:\",\r\n          file.name,\r\n          file.size,\r\n          file.type\r\n        );\r\n      } else {\r\n        addAlert(\"No documents found to submit\", \"error\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Call BPMN start API\r\n      const bpmnResponse = await fetch(\"/onboarding/start\", {\r\n        method: \"POST\",\r\n        body: formDataToSend,\r\n      });\r\n\r\n      if (!bpmnResponse.ok) {\r\n        throw new Error(`BPMN start failed: ${bpmnResponse.status}`);\r\n      }\r\n\r\n      const bpmnResult = await bpmnResponse.json();\r\n      console.log(\"BPMN Process Started:\", bpmnResult);\r\n\r\n      // Set process ID from BPMN response\r\n      setProcessId(bpmnResult.processInstanceKey);\r\n\r\n      // Simulate additional processing time\r\n      await new Promise((resolve) => setTimeout(resolve, 1000));\r\n\r\n      // Use BPMN success or simulate triage\r\n      const riskLevels = [\"low\", \"medium\", \"high\"];\r\n      const randomRisk =\r\n        riskLevels[Math.floor(Math.random() * riskLevels.length)];\r\n      const triagePassed = randomRisk === \"low\"; // Only low risk passes automatically\r\n\r\n      const updatedFormData = {\r\n        ...formData,\r\n        workflowStatus: triagePassed ? \"account_setup\" : \"manual_review\",\r\n        submissionTimestamp: new Date().toISOString(),\r\n        riskLevel: randomRisk,\r\n        aiTriageResult: triagePassed ? \"passed\" : \"failed\",\r\n        workflowHistory: [\r\n          {\r\n            step: \"Application Submitted\",\r\n            status: \"completed\",\r\n            timestamp: new Date().toISOString(),\r\n            description: \"Customer submitted onboarding application\",\r\n          },\r\n          {\r\n            step: \"Initial Triage\",\r\n            status: \"completed\",\r\n            timestamp: new Date().toISOString(),\r\n            description: `AI Agent completed initial triage - ${randomRisk} risk detected`,\r\n          },\r\n          ...(triagePassed\r\n            ? [\r\n                {\r\n                  step: \"Account Setup\",\r\n                  status: \"in_progress\",\r\n                  timestamp: new Date().toISOString(),\r\n                  description: \"Account creation in progress\",\r\n                },\r\n              ]\r\n            : [\r\n                {\r\n                  step: \"Manual Review\",\r\n                  status: \"pending\",\r\n                  timestamp: new Date().toISOString(),\r\n                  description:\r\n                    \"Application requires manual review due to risk level\",\r\n                },\r\n              ]),\r\n        ],\r\n      };\r\n\r\n      // Update form data\r\n      setFormData(updatedFormData);\r\n\r\n      // Save to localStorage for other components to access\r\n      const existingApplications = JSON.parse(\r\n        localStorage.getItem(\"submittedApplications\") || \"[]\"\r\n      );\r\n      const newApplication = {\r\n        ...updatedFormData,\r\n        id: processId,\r\n        status: triagePassed ? \"account_setup\" : \"pending_review\",\r\n      };\r\n\r\n      existingApplications.push(newApplication);\r\n      localStorage.setItem(\r\n        \"submittedApplications\",\r\n        JSON.stringify(existingApplications)\r\n      );\r\n\r\n      // Trigger storage event for other components\r\n      window.dispatchEvent(new Event(\"storage\"));\r\n\r\n      if (triagePassed) {\r\n        addAlert(\r\n          `BPMN Process Started! Process ID: ${bpmnResult.processInstanceKey}`,\r\n          \"success\"\r\n        );\r\n      } else {\r\n        addAlert(\r\n          `Application submitted successfully! Risk level: ${randomRisk.toUpperCase()}. Manual review required.`,\r\n          \"info\"\r\n        );\r\n      }\r\n\r\n      // Set submission state to show success screen\r\n      setIsSubmitted(true);\r\n    } catch (error) {\r\n      console.error(\"BPMN onboarding start failed:\", error);\r\n      addAlert(`Failed to start onboarding process: ${error.message}`, \"error\");\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const handlePreviousStep = () => {\r\n    setCurrentStep((prev) => Math.max(prev - 1, 1));\r\n  };\r\n\r\n\r\n\r\n  const getRiskLevelColor = (level) => {\r\n    switch (level) {\r\n      case \"low\":\r\n        return \"#28a745\";\r\n      case \"medium\":\r\n        return \"#ffc107\";\r\n      case \"high\":\r\n        return \"#dc3545\";\r\n      default:\r\n        return \"#6c757d\";\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case \"pending_review\":\r\n        return \"#ffc107\";\r\n      case \"approved\":\r\n        return \"#28a745\";\r\n      case \"rejected\":\r\n        return \"#dc3545\";\r\n      case \"additional_docs_required\":\r\n        return \"#17a2b8\";\r\n      default:\r\n        return \"#6c757d\";\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return \"0 Bytes\";\r\n    const k = 1024;\r\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\r\n  };\r\n\r\n  const renderSuccessScreen = () => {\r\n    return (\r\n      <div className=\"form-section\">\r\n        <h3 className=\"form-section-title\">🎯 Onboarding Initiated</h3>\r\n        <div className=\"completion-status\">\r\n          <div className=\"alert alert-success\">\r\n            <h4>✅ Onboarding Process Initiated!</h4>\r\n            <p>\r\n              Thank you for completing the onboarding process. The customer\r\n              details and documents have been submitted to the BPMN workflow\r\n              engine for processing.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"process-summary\">\r\n            <h4>📋 Process Summary</h4>\r\n            <div className=\"summary-item\">\r\n              <span>\r\n                <strong>Process Instance Key:</strong>\r\n              </span>\r\n              <span>{processId || \"Pending...\"}</span>\r\n            </div>\r\n            <div className=\"summary-item\">\r\n              <span>\r\n                <strong>Submitted On:</strong>\r\n              </span>\r\n              <span>{new Date().toLocaleDateString()}</span>\r\n            </div>\r\n            <div className=\"summary-item\">\r\n              <span>\r\n                <strong>Status:</strong>\r\n              </span>\r\n              <span>🔄 In Progress</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginTop: \"30px\", textAlign: \"center\" }}>\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              onClick={() => {\r\n                setIsSubmitted(false);\r\n                setShowOnboarding(false);\r\n                setCurrentStep(1);\r\n                setFormData({\r\n                  customer: {\r\n                    fullName: \"\",\r\n                    dob: \"\",\r\n                    mobile: \"\",\r\n                    email: \"\",\r\n                    pep: false,\r\n                    income_band: \"Not provided\",\r\n                    occupation: \"\",\r\n                  },\r\n                  address: {\r\n                    line1: \"\",\r\n                    line2: \"\",\r\n                    city: \"\",\r\n                    state: \"\",\r\n                    pin: \"\",\r\n                    country: \"\",\r\n                  },\r\n                  ids: {\r\n                    idType: \"\",\r\n                    idNumber: \"\",\r\n                  },\r\n                  product: {\r\n                    desired_account: \"\",\r\n                    expected_mab_range: \"\",\r\n                  },\r\n                  documents: [],\r\n                  kycStatus: \"pending\",\r\n                  riskAssessment: \"pending\",\r\n                });\r\n              }}\r\n            >\r\n              Start New Application\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n\r\n  const renderStepContent = () => {\r\n    switch (currentStep) {\r\n      case 1:\r\n        // Step 1: Document Upload + Basic Info + Address\r\n        return (\r\n          <div className=\"form-section\">\r\n            <h3 className=\"form-section-title\">\r\n              Document Upload & Basic Information\r\n            </h3>\r\n            <div\r\n              className=\"document-upload\"\r\n              onDrop={async (e) => {\r\n                e.preventDefault();\r\n                if (!ocrProcessing) {\r\n                  await handleFileUpload(e.dataTransfer.files);\r\n                }\r\n              }}\r\n              onDragOver={(e) => e.preventDefault()}\r\n              onClick={() => {\r\n                if (!ocrProcessing) {\r\n                  document.getElementById(\"file-input\").click();\r\n                }\r\n              }}\r\n              style={{\r\n                opacity: ocrProcessing ? 0.6 : 1,\r\n                cursor: ocrProcessing ? \"not-allowed\" : \"pointer\",\r\n              }}\r\n            >\r\n              {ocrProcessing ? (\r\n                <>\r\n                  <div className=\"upload-spinner\">\r\n                    <div className=\"spinner\"></div>\r\n                  </div>\r\n                  <div className=\"upload-text\">\r\n                    <p>Processing document with OCR...</p>\r\n                    <p>\r\n                      Please wait while we extract information from your\r\n                      document\r\n                    </p>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <div className=\"upload-icon\">📄</div>\r\n                  <div className=\"upload-text\">\r\n                    <p>Drag and drop your documents here, or click to browse</p>\r\n                    <p>Supported formats: PDF, JPG, PNG (Max 10MB each)</p>\r\n                  </div>\r\n                </>\r\n              )}\r\n              <input\r\n                id=\"file-input\"\r\n                type=\"file\"\r\n                multiple\r\n                accept=\".pdf,.jpg,.jpeg,.png\"\r\n                style={{ display: \"none\" }}\r\n                onChange={async (e) => {\r\n                  if (!ocrProcessing) {\r\n                    await handleFileUpload(e.target.files);\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            {formData.documents.length > 0 && (\r\n              <div className=\"file-list\">\r\n                <h4>Uploaded Documents:</h4>\r\n                {formData.documents.map((doc) => (\r\n                  <div key={doc.id} className=\"file-item\">\r\n                    <div>\r\n                      <div className=\"file-name\">{doc.name}</div>\r\n                      <div className=\"file-size\">\r\n                        {formatFileSize(doc.size)}\r\n                      </div>\r\n                    </div>\r\n                    <button\r\n                      className=\"remove-file\"\r\n                      onClick={() => removeFile(doc.id)}\r\n                      title=\"Remove file\"\r\n                    >\r\n                      ✕\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {/* OCR Processing Indicator */}\r\n            {ocrProcessing && (\r\n              <div className=\"ocr-processing\">\r\n                <div className=\"processing-indicator\">\r\n                  <div className=\"spinner\"></div>\r\n                  <span>Extracting information from document...</span>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Document-related fields */}\r\n            <h4>Document Information</h4>\r\n            <div className=\"grid grid-2\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Full Name *\"\r\n                value={formData.customer.fullName}\r\n                onChange={(e) =>\r\n                  handleInputChange(\"customer\", \"fullName\", e.target.value)\r\n                }\r\n                disabled={ocrProcessing}\r\n              />\r\n              <input\r\n                type=\"date\"\r\n                placeholder=\"Date of Birth *\"\r\n                value={formData.customer.dob}\r\n                onChange={(e) =>\r\n                  handleInputChange(\"customer\", \"dob\", e.target.value)\r\n                }\r\n                disabled={ocrProcessing}\r\n              />\r\n            </div>\r\n            <div className=\"grid equal-cols\">\r\n              <textarea\r\n                placeholder=\"Complete Address *\"\r\n                value={formData.address.line1}\r\n                onChange={(e) =>\r\n                  handleInputChange(\"address\", \"line1\", e.target.value)\r\n                }\r\n                rows=\"3\"\r\n                disabled={ocrProcessing}\r\n                style={{\r\n                  width: \"100%\",\r\n                  resize: \"vertical\",\r\n                  fontFamily: \"inherit\",\r\n                  fontSize: \"inherit\",\r\n                  padding: \"8px 12px\",\r\n                  border: \"1px solid #ddd\",\r\n                  borderRadius: \"4px\",\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"grid equal-cols\">\r\n              <select\r\n                value={formData.ids.idType}\r\n                onChange={(e) =>\r\n                  handleInputChange(\"ids\", \"idType\", e.target.value)\r\n                }\r\n                required\r\n                disabled={ocrProcessing}\r\n              >\r\n                <option value=\"\">Select ID Type *</option>\r\n                <option value=\"aadhaar\">Aadhaar</option>\r\n                <option value=\"pan\">PAN Card</option>\r\n                <option value=\"voter\">Voter ID</option>\r\n                <option value=\"passport\">Passport</option>\r\n              </select>\r\n              <input\r\n                type=\"text\"\r\n                placeholder={`Enter ${formData.ids.idType || \"ID\"} Number *`}\r\n                value={formData.ids.idNumber}\r\n                onChange={(e) =>\r\n                  handleInputChange(\"ids\", \"idNumber\", e.target.value)\r\n                }\r\n                required\r\n                disabled={ocrProcessing}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 2:\r\n        // Step 2: Contact Info, Address Details, and Product Info\r\n        return (\r\n          <div className=\"form-section\">\r\n            <h3 className=\"form-section-title\">\r\n              Contact & Product Information\r\n            </h3>\r\n\r\n            <h4>Contact Information</h4>\r\n            <div className=\"grid grid-2\">\r\n              <input\r\n                type=\"tel\"\r\n                placeholder=\"Mobile Number *\"\r\n                value={formData.customer.mobile}\r\n                onChange={(e) =>\r\n                  handleInputChange(\"customer\", \"mobile\", e.target.value)\r\n                }\r\n              />\r\n              <input\r\n                type=\"email\"\r\n                placeholder=\"Email Address *\"\r\n                value={formData.customer.email}\r\n                onChange={(e) =>\r\n                  handleInputChange(\"customer\", \"email\", e.target.value)\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <h4>Personal Details</h4>\r\n            <div className=\"grid grid-2\">\r\n              <div className=\"input-group\">\r\n                <label className=\"input-label\">Occupation</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.customer.occupation}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"customer\", \"occupation\", e.target.value)\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <label className=\"input-label\">Income Band</label>\r\n                <select\r\n                  value={formData.customer.income_band}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"customer\", \"income_band\", e.target.value)\r\n                  }\r\n                >\r\n                  <option value=\"\">Select Income Band</option>\r\n                  <option value=\"0-2L\">0-2L</option>\r\n                  <option value=\"2L-5L\">2L-5L</option>\r\n                  <option value=\"5L-10L\">5L-10L</option>\r\n                  <option value=\"10L+\">10L+</option>\r\n                  <option value=\"Not provided\">Not provided</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-1\">\r\n              <div className=\"checkbox-container\">\r\n                <label>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={formData.customer.pep}\r\n                    onChange={(e) =>\r\n                      handleInputChange(\"customer\", \"pep\", e.target.checked)\r\n                    }\r\n                  />\r\n                  <span className=\"checkbox-label\">\r\n                    I am a Politically Exposed Person (PEP)\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <h4>Address Details</h4>\r\n            <div className=\"grid grid-2\">\r\n              <div className=\"input-group\">\r\n                <label className=\"input-label\">City *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.address.city}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"address\", \"city\", e.target.value)\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <label className=\"input-label\">State *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.address.state}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"address\", \"state\", e.target.value)\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <label className=\"input-label\">PIN Code *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.address.pin}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"address\", \"pin\", e.target.value)\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <label className=\"input-label\">Country *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.address.country}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"address\", \"country\", e.target.value)\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <h4>Product Details</h4>\r\n            <div className=\"grid grid-2\">\r\n              <select\r\n                value={formData.product.desired_account}\r\n                onChange={(e) =>\r\n                  handleInputChange(\r\n                    \"product\",\r\n                    \"desired_account\",\r\n                    e.target.value\r\n                  )\r\n                }\r\n              >\r\n                <option value=\"\">Select Account Type *</option>\r\n                <option value=\"savings\">Savings</option>\r\n                <option value=\"current\">Current</option>\r\n              </select>\r\n              <select\r\n                value={formData.product.expected_mab_range}\r\n                onChange={(e) =>\r\n                  handleInputChange(\r\n                    \"product\",\r\n                    \"expected_mab_range\",\r\n                    e.target.value\r\n                  )\r\n                }\r\n              >\r\n                <option value=\"\">Expected Monthly Balance *</option>\r\n                <option value=\"0-10k\">0-10k</option>\r\n                <option value=\"10k-25k\">10k-25k</option>\r\n                <option value=\"25k+\">25k+</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {!showOnboarding ? (\r\n        <div className=\"start-screen\">\r\n          <h1>Welcome to Customer Portal</h1>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              gap: \"1rem\",\r\n              justifyContent: \"center\",\r\n              flexWrap: \"wrap\",\r\n            }}\r\n          >\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              onClick={() => setShowOnboarding(true)}\r\n            >\r\n              Start Onboarding\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : isSubmitted ? (\r\n        <>\r\n          <h1 className=\"page-title\">Customer Onboarding</h1>\r\n          {renderSuccessScreen()}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <h1 className=\"page-title\">Customer Onboarding</h1>\r\n\r\n          {alerts.map((alert) => (\r\n            <div key={alert.id} className={`alert alert-${alert.type}`}>\r\n              {alert.message}\r\n            </div>\r\n          ))}\r\n\r\n          <div className=\"workflow-container\">\r\n            {/* Steps Indicator */}\r\n            <div className=\"step-indicator\">\r\n              {steps.map((step, index) => (\r\n                <div key={step.id} className=\"step\">\r\n                  <div\r\n                    className={`step-circle ${\r\n                      index + 1 < currentStep\r\n                        ? \"completed\"\r\n                        : index + 1 === currentStep\r\n                        ? \"active\"\r\n                        : \"pending\"\r\n                    }`}\r\n                  >\r\n                    {index + 1 < currentStep ? \"✓\" : step.id}\r\n                  </div>\r\n                  <div\r\n                    className={`step-label ${\r\n                      index + 1 < currentStep\r\n                        ? \"completed\"\r\n                        : index + 1 === currentStep\r\n                        ? \"active\"\r\n                        : \"\"\r\n                    }`}\r\n                  >\r\n                    {step.title}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"progress-bar\">\r\n              <div\r\n                className=\"progress-fill\"\r\n                style={{\r\n                  width: `${((currentStep - 1) / (steps.length - 1)) * 100}%`,\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            {renderStepContent()}\r\n\r\n            <div className=\"step-navigation\">\r\n              {currentStep > 1 && (\r\n                <button\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={handlePreviousStep}\r\n                  disabled={loading}\r\n                >\r\n                  Previous\r\n                </button>\r\n              )}\r\n              {currentStep === 1 && (\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={handleNextStep}\r\n                  disabled={loading}\r\n                >\r\n                  {loading ? \"Processing...\" : \"Next\"}\r\n                </button>\r\n              )}\r\n              {currentStep === 2 && (\r\n                <button\r\n                  className=\"btn btn-success\"\r\n                  onClick={handleSubmitFromStep2}\r\n                  disabled={loading}\r\n                >\r\n                  {loading ? \"Submitting Application...\" : \"Submit Application\"}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomerOnboarding;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}